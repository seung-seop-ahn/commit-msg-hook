#!/bin/sh

COMMIT_MSG_FILE=$1
COMMIT_MSG=$(cat $COMMIT_MSG_FILE)

TITLE=$(echo "$COMMIT_MSG" | awk 'NR==1{print $0}')
BODY=$(echo "$COMMIT_MSG" | awk 'NR>1{print}')

TYPE=$(echo $TITLE | cut -d':' -f1)
MESSAGE=$(echo $TITLE | cut -d':' -f2-)

TYPE_LOWER=$(echo $TYPE | tr '[:upper:]' '[:lower:]')

case $TYPE_LOWER in
  feat)
    EMOJI="âœ¨"
    ;;
  implement)
    EMOJI="ðŸŽ¨"
    ;;
  experiment)
    EMOJI="ðŸ§"
    ;;
  improve)
    EMOJI="âš¡ï¸"
    ;;
  performance)
    EMOJI="âš¡ï¸"
    ;;
  style)
    EMOJI="ðŸ› ï¸"
    ;;
  design)
    EMOJI="ðŸ’„"
    ;;
  chore)
    EMOJI="ðŸ‘·"
    ;;
  add)
    EMOJI="âž•"
    ;;
  use)
    EMOJI="ðŸ“¦"
    ;;
  refactor)
    EMOJI="â™»ï¸"
    ;;
  update)
    EMOJI="â™»ï¸"
    ;;
  move)
    EMOJI="ðŸšš"
    ;;
  comment)
    EMOJI="ðŸ’¡"
    ;;
  infra)
    EMOJI="ðŸ§±"
    ;;
  wip)
    EMOJI="ðŸš§"
    ;;
  remove)
    EMOJI="ðŸ”¥"
    ;;
  fix)
    EMOJI="ðŸ›"
    ;;
  hotfix)
    EMOJI="ðŸš‘"
    ;;
  docs)
    EMOJI="ðŸ“"
    ;;
  merge)
    EMOJI="ðŸ”€"
    ;;
  revert)
    EMOJI="âª"
    ;;
esac

FORMATTED_TYPE=$(echo ${TYPE_LOWER:0:1} | tr '[:lower:]' '[:upper:]')$(echo ${TYPE_LOWER:1} | tr '[:upper:]' '[:lower:]')

echo "${EMOJI} ${FORMATTED_TYPE}:${MESSAGE}\n${BODY}" > $COMMIT_MSG_FILE

